<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>README Challenge CHVD devel</title>
    <link rel="stylesheet" href="challenge.css">
</head>
<body>

<h1> Challange CHVD 2012 - Développements</h1>

<h2> Les choix techniques</h2>
<p>
L'idée à la base c'était de découvrir les différentes techniques pour avoir un site web dynamique.
Il n'est donc pas impossible que certains choix techniques ne soient pas très appropriés. J'ai peut-être
pris une hache pour couper du pain mais bon, ça coupe. Je me suis donc mis à JQery et AJAX pour le coté client et
la combinaison PHP plus SQlite3 du coté du serveur. <br />
Le code est disponible sur <a href="https://github.com/thouveng/challengeCHVD">
https://github.com/thouveng/challengeCHVD</a>.
</p>

<h2> Ce qui fonctionne </h2>

<ul>
    <li> Un script PHP permet de générer les différentes bases de données utilisées à partir du fichier CSV des
    sommets 2011. Ce script initialise les tables <b>SOMMETS</b> et <b>MASSIFS</b> décrites dans le point suivant.
    Il est complètement indépendant du site web et n'a pas d'utilité autre que générer le fichier initial pour la
    base de donnée. Il est appelé en mode console par la commande "php create_database.php".
    </li>

     <li> La tables utilisées sont les suivantes:<br>
         <dl>
             <dt> SOMMETS </dt>
             <dd> S_ID: INTEGER, la clé</dd>
             <dd> S_NOM: TEXT, le nom du sommet</dd>
             <dd> S_MID: INTEGER, la clé du massif associé au sommet</dd>
             <dd> S_ALTI: INTEGER, utilisé à titre indicatif</dd>
             <dd> S_PTS: INTEGER, les points rapporté par le sommet</dd>
             <dd> S_ANNEE: INTEGER, utilisé dans le calcul du bonus des nouveaux sommets</dd>
             <dd> S_COMMENT: TEXT, utilisé pour préciser des particularités</dd>

             <dt> MASSIFS </dt>
             <dd> M_ID: INTEGER, la clé</dd>
             <dd> M_NOM: TEXT, le nom du massif</dd>

             <dt> PILOTES </dt>
             <dd> P_ID: INTEGER, la clé</dd>
             <dd> P_PSEUDO: TEXT, le pseudo utilisé pour l'affichage des résultats</dd>

             <dt> VOLSRANDOS </dt>
             <dd> V_ID: INTEGER, la clé</dd>
             <dd> V_SID: INTEGER, la clé du sommet associé au vol</dd>
             <dd> V_PID: INTEGER, la clé du pilote associé au vol</dd>
             <dd> V_DATE: INTEGER, utilisation des timestamps Unix</dd>
             <dd> V_BI: INTEGER, vol effectué en biplace, utilisé pour la bonification</dd>
             <dd> V_BUT: REAL, compte pour 1/2 point de bonification</dd>
             <dd> V_CO2: INTEGER, 0 = mobilite douce, 1: pas douce. Utilisé à titre informatif</dd>
             <dd> V_COMMENT: TEXT, utilisé par pilote pour donner des infos sur un nouveau déco ou faire une réclamation</dd>
         </dl>
    </li>

    <li> La page principale <i>index.php</i> est écrite en HTML. Les requêtes au serveur se font en AJAX. Les menus déroulants sont crées dynamiquement.
    La gestion des différentes zones de saisies (grisées ou pas) et faite en javascript. La validation du vol rando passe également par du javascript.
    La mise en page et son contenu sont décrits dans <a href="#MiseEnPage">"Mise en page et contenu des pages"</a>.
    </li>
</ul>

</p>

<h2> Ce qu'il reste à faire </h2>

<ul>
    <li> La vérification par la fonction check_volrando() des informations passées. Si les infos sont bonnes on envoit le vol au serveur pour
    l'ajout dans la base de donnée. Pour l'instant la vérification est minimaliste mais elle permet de voir si tout est correct. Le vol n'est
    pas encore enregistré dans la base, il est simplement affiché dans la zone de la console.
    </li>

    <li> L'affichage des vols et du classement avec la possibilté de filtre et de tris.
    </li>

    <li> Améliorer le tout...
    </li>
</ul>

<h2> <a name="MiseEnPage">Mise en page et contenu des pages</a> </h2>

<p>
J'ai tout séparé en trois pages.
<ul>
    <li> Une page principale (HTML + JS) qui a pour but d'afficher le réglement, une zone de saisie et l'affichage des résultats. </li>
    <li> Une page de réglement (HTML) qui affiche ... le réglement 2012. </li>
    <li> Des scripts PHP qui servent à interroger la base de données. Le résultat est envoyé au client via des requêtes
    XMLHttpRequest. </li>
</ul>
</p>

<h3> La page principale </h3>

<p> La page principales est décomposée en trois zones. Une zone "bandeau" qui permet de faire une introduction, une
zone "contenu" qui sera la zone principale pour la saisie des données et l'affichage des résultats et enfin une troisième
zone permettant d'afficher le copyright qui n'existe pas.
</p>

<h4>Le bandeau</h4>

<p> Il contient le message de bienvenue, un lien vers le réglement du concours et une autre lien vers ce fichier </p>

<h4> Le contenu </h4>

<p> C'est THE element de notre application. Il contient une partie gauche qui permet de saisir les informations
du vol et une zone de droite permettant d'afficher les résultats.
</p>

<h5> La zone de saisie du vol </h5>

<p> A écrire ... </p>

<h5> La zone d'affichage des résultats </h5>

<p> A écrire ... </p>

<h4> Le pied </h4>

<p> Qui ne sert à rien sauf à le prendre ...  </p>

<h3> Le réglement </h3>

<p> Le réglement qui n'est pas à jour. Pour l'instant c'est celui de 2011. Il reste à dsicuter des points de bonus. </p>
</body>
</html>
